<!DOCTYPE HTML>
<html lang="en">
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.10/css/all.css" integrity="sha384-+d0P83n9kaQMCwj8F4RJB66tzIwOKmrdb46+porD/OvrJ+37WqIM7UoBtwHO6Nlg" crossorigin="anonymous">
	<link rel="stylesheet" href="messages.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>
</head>
<body>
	<nav class="navbar navbar-expand-lg" id="nav">
		<a class="navbar-brand" href="home.html">InLook</a>
		<div class="collapse navbar-collapse" id="navbarSupportedContent">
			<div class="input-group">
				<input type="text" class="form-control" placeholder="Search...">
				<span class="input-group-btn">
					<button class="btn btn-default" type="button"><i class="fas fa-search"></i></button>
				</span>
			</div>
			<ul class="navbar-nav ml-auto">
				<li class="nav-item">
					<a class="nav-link" href="profile.html" id="userName"><i class="fas fa-user-circle"></i> User </a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="#"><i class="far fa-envelope fa-lg"></i></a>
				</li>
				|
				<li class="nav-item">
					<a class="nav-link" href="login.html" id="logout"><i class="fas fa-sign-out-alt"></i></a>
				</li>
			</ul>
		</div>
	</nav>
	<div class="main">
		<h4>Messages</h4>
		<!-- message container -->
		<div class="chat-container-main">
			<div class="people-list">
				<template>
					<div class="person">
						<div class="person-name">
							<span class="person-name-1">Sumedha Gupta</span>
						</div>
						<div class="chat-ongoing">
							<span>Hi! I was wondering if you're free for a job right now?</span>
						</div>
					</div>
				</template>
				<!-- list of people -->
				<div class="person">
					<div class="person-name">
						<span class="person-name-1">Sumedha Gupta</span>
					</div>
					<div class="chat-ongoing">
						<span>Hi! I was wondering if you're free for a job right now?</span>
					</div>
				</div>
				<div class="person">
					<div class="person-name">
						<span class="person-name-1">Lynley Yamaguchi</span>
					</div>
					<div class="chat-ongoing">
						<span>Hi! I was wondering if you're free for a job right now?</span>
					</div>
				</div>
				<div class="person">
					<div class="person-name">
						<span class="person-name-1">Vince Tierra</span>
					</div>
					<div class="chat-ongoing">
						<span>Hi! I was wondering if you're free for a job right now?</span>
					</div>
				</div>

			</div>
			<div class="chat-container">
				<div class="chat-messages">
					<template id="chat-message-template">
						<div class="container-msg">
							<img class="chat-profile-pic" src="" alt="avatar">
							<p class="chat-message-text"></p>
							<span class="current-time-right"></span>
						</div>
					</template>
					<!-- a bunch of messages exchanged back and forth by two people lol -->
					<div class="container-msg">
						<img src="profpic.png" alt="avatar">
						<p>Hellooooo! I'm Sumedha</p>
						<span class="current-time-right">11:00pm</span>
					</div>
					<div class="container-msg diff">
						<img src="profpic.png" alt="avatar" class="right">
						<p>Hi! How are you doing?</p>
						<span class="current-time-left">11:01pm</span>
					</div>
					<div class="container-msg">
						<img src="profpic.png" alt="avatar">
						<p>I need help with some interior designs</p>
						<span class="current-time-right">11:02pm</span>
					</div>
					<div class="container-msg diff">
						<img src="profpic.png" alt="avatar" class="right">
						<p>Okay, I can help</p>
						<span class="current-time-left">11:03pm</span>
					</div>
				</div>
				<div class="chat-input">
					<input class="chat-text-field" type="text">
					<button id="send-message-button">Send</button>
				</div>
			</div>
		</div>

	</div>

	<script>
	$(document).ready(() => {
		const userId = sessionStorage.getItem('id');
		const getUserProfileUrl = '/loadProfile/' + userId;
		console.log(getUserProfileUrl);
		$.ajax({
			url: getUserProfileUrl,
			type: 'GET',
			datatype: 'JSON',
			success: (data) => {
				console.log('Recieved user profile info');
				console.log(data);
				$('#userName')[0].childNodes[1].nodeValue = ' ' + data.firstName + ' ' + data.lastName;
			}
		});

		const sb = new SendBird( {
			appID: '02CF44A7-02AA-4F78-82EA-93CEE2CC5FCF';
		});

		//send message button click handler
		$('#send-message-button').click(() => {

		});

		$('.person').click(() => {

		});

		$('#logout').click(() => {
			sessionStorage.clear();
			console.log(sessionStorage.getItem('id'));
		});

	});
	</script>
</body>
</html>
